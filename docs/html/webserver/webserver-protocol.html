
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="nl">
  <head>
    <meta charset="utf-8" />
    <title>Protocollen &#8212; iot-0  documentatie</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=808B982A" />
    <link rel="stylesheet" type="text/css" href="../_static/dragndrop.css?v=1FF7F927" />
    <link rel="stylesheet" type="text/css" href="../_static/poll.css?v=E220AC33" />
    <link rel="stylesheet" type="text/css" href="../_static/parsons.css?v=2F3E13EE" />
    <link rel="stylesheet" type="text/css" href="../_static/js_lib/prettify.css?v=2A364B6B" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/runestonebase.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/mchoice.js?v=6F3B51A7"></script>
    <script type="text/javascript" src="../_static/timedmc.js?v=B010A457"></script>
    <script type="text/javascript" src="../_static/timed.js?v=6789FE30"></script>
    <script type="text/javascript" src="../_static/shortanswer.js?v=BB0B99B1"></script>
    <script type="text/javascript" src="../_static/timed_shortanswer.js?v=B3A117D7"></script>
    <script type="text/javascript" src="../_static/dragndrop.js?v=3984FD8D"></script>
    <script type="text/javascript" src="../_static/timeddnd.js?v=378F237E"></script>
    <script type="text/javascript" src="../_static/poll.js?v=11AD6126"></script>
    <script type="text/javascript" src="../_static/js_lib/prettify.js?v=CA7E8928"></script>
    <script type="text/javascript" src="../_static/js_lib/hammer.min.js?v=73056367"></script>
    <script type="text/javascript" src="../_static/parsons.js?v=93EFFF39"></script>
    <script type="text/javascript" src="../_static/timedparsons.js?v=2EEA9E5A"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="../_static/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="../_static/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/waypoints.min.js"></script>
    <script type="text/javascript" src="../_static/rangy-core.js"></script>
    <script type="text/javascript" src="../_static/rangy-textrange.js"></script>
    <script type="text/javascript" src="../_static/rangy-cssclassapplier.js"></script>
    <script type="text/javascript" src="../_static/user-highlights.js"></script>
    <script type="text/javascript" src="../_static/jquery.idle-timer.js"></script>
    <script type="text/javascript" src="../_static/processing-1.4.1.min.js"></script>
    <script type="text/javascript" src="../_static/jquery.hotkey.js"></script>
    <script type="text/javascript" src="../_static/jquery-migrate-1.2.1.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Zoeken" href="../search.html" />
    <link rel="next" title="Webserver-Opdrachten" href="opdrachten.html" />
    <link rel="prev" title="Webserver-keten" href="webserver-keten.html" />

<script type="text/javascript">
  eBookConfig = {};
  eBookConfig.host = '' ? '' : 'http://127.0.0.1:8000';
/*
  eBookConfig.app = eBookConfig.host+'/';
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.course = '';
  eBookConfig.logLevel = ;
  eBookConfig.loginRequired = ;
  eBookConfig.build_info = "";
  eBookConfig.isLoggedIn = false;
  eBookConfig.useRunestoneServices = ;
  eBookConfig.python3 = ;
  eBookConfig.basecourse = '';
  eBookConfig.runestone_version = '';
*/
</script>
<script type="application/json" class="js-hypothesis-config">
{
"showHighlights": false
}
</script>
<script async src="https://hypothes.is/embed.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">iot-0</a></h1>








<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../voorwoord.html">Voorwoord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inleiding.html">Inleiding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bouwstenen.html">Bouwstenen</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../webserver.html">Webserver-knopen</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="webserver-keten.html">Webserver-keten</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Protocollen</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adressering">Adressering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#payload">Payload</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="opdrachten.html">Webserver-Opdrachten</a></li>
<li class="toctree-l2"><a class="reference internal" href="nodered-opdrachten.html">NodeRed-opdrachten</a></li>
<li class="toctree-l2"><a class="reference internal" href="toetsvragen.html">Toetsvragen</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../wifi.html">WiFi-MQTT-knopen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rfm69.html">RFM69-knopen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lora.html">LoRa-knopen</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configureren.html">Configureren</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ten-geleide.html">Voor de docent</a></li>
</ul>
<p class="caption"><span class="caption-text">Andere modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://infvo.github.io/com-0/">Com-0</a></li>
<li class="toctree-l1"><a class="reference external" href="https://infvo.github.io/iot-1/">IoT-1</a></li>
</ul>


  <p class="topless"><a href="webserver-keten.html"
                        title="vorig hoofdstuk">Vorige</a></p>
  <p class="topless"><a href="opdrachten.html"
                        title="volgend hoofdstuk">Volgende</a></p>
<div id="searchbox" style="display: none" role="search">

    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Zoek" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="protocollen">
<h1>Protocollen<a class="headerlink" href="#protocollen" title="Permalink naar deze titel">¶</a></h1>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../_images/IoT-webserver-protocol.png"><img alt="../_images/IoT-webserver-protocol.png" src="../_images/IoT-webserver-protocol.png" style="width: 500px;" /></a>
<p class="caption"><span class="caption-text">Webserver protocolstack</span><a class="headerlink" href="#id1" title="Permallink naar deze afbeelding">¶</a></p>
</div>
<p>De protocolstack voor de webserver-keten bevat de volgende elementen, vanaf de toepassing gezien:</p>
<ul class="simple">
<li><p>web-app</p></li>
<li><p>web: hypertext transfer protocol (HTTP): HTML-documenten enz.</p></li>
<li><p>internet: transmission control protocol (TCP): betrouwbare bytestromen</p></li>
<li><p>internet-protocol (IP): best-effort pakketcommunicatie;
universeel datatransport, onafhankelijk van hardware en toepassingen</p></li>
<li><p>fysieke (hardware) verbinding: WiFi of Ethernet</p></li>
</ul>
<p>Elk protocol heeft zijn eigen vorm van <em>adressering</em> en zijn eigen formaat voor datatransport.
Dit bevat de “netto” te transporteren data: de <em>payload</em>,
en extra protocolgegevens voor de adressering, de beveiliging van de payload, enz.</p>
<p>De basisprotocollen van het internet, “TCP/IP”, vormen een logische laag die de toepassingen scheidt van de hardware
(zie <em>3-lagen model</em>).
Deze logische laag is volgende het <em>end-to-end principe</em> van het internet gesplitst in een universele netwerklaag
(het IP-protocol) en meer gespecialiseerde lagen in het eindpunt, zoals de TCP- en UDP-protocollen.</p>
<div class="topic">
<p class="topic-title first">3-lagen model</p>
<p>In de ICT komen we op allerlei plaatsen het 3-lagen model tegen:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>toepassingen-laag</p></td>
<td><p>toepassingen: …</p></td>
</tr>
<tr class="row-even"><td><p>logische laag</p></td>
<td><p>systeemsoftware: OS, programmeertalen, DBMS, TCP/IP</p></td>
</tr>
<tr class="row-odd"><td><p>fysieke laag</p></td>
<td><p>hardware: CPU, memory, disk, netwerk, …</p></td>
</tr>
</tbody>
</table>
<p>De <em>logische laag</em> schermt de toepassingen af van de onderliggende hardware:
je kunt daardoor eenzelfde toepassing combineren met allerlei verschillende hardware.
De logische laag schermt ook de hardware af van de toepassingen:
je kunt dezelfde hardware gebruiken voor allerlei verschillende toepassingen.
Door de logische laag is de evolutie van de toepassingen onafhankelijk van de evolutie van de hardware.
Je kunt bestaande toepassingen gebruiken op (bijna) elke nieuwe computer.
En je hoeft niet voor elke nieuwe toepassing een nieuwe computer te kopen.
Zowel de evolutie van de hardware als die van de software kunnen daardoor veel sneller verlopen.</p>
<p>In de begintijd van de computer waren de hardware en de toepassingssoftware veel directer gekoppeld.
De ontkoppeling door een universele logische laag is een cruciale stap in de ontwikkeling van de computer.</p>
</div>
<div class="topic">
<p class="topic-title first">Internet end-to-end principe</p>
<p>Het IP-protocol verzorgt het datatransport in het internet.
Dit protocol is <em>in het netwerk</em> aanwezig: in de verbonden computers en in de routers e.d.
De hogere protocollen (TCP, UDP; HTTP; enz.) zijn alleen in de eindpunten aanwezig.
Het IP-netwerk is hierdoor onafhankelijk van de toepassingen - en daardoor geschikt voor (bijna) alle toepassingen.
Dit betekent dat je voor een nieuwe toepassing het netwerk niet hoeft aan te passen.
Iedereen kan een nieuwe toepassing voor het internet maken: hiervoor is alleen software in de eindpunten nodig,
bijvoorbeeld als toepassingssoftware op een smartphone in combinatie met een server.</p>
<p>Het IP-protocol is universeel wat de fysieke verbindingen betreft:
dit protocol schermt de (meeste) eigenschappen van de fysieke verbindingen af voor de hogere protocols.
Het IP-protocol is ook universeel wat de toepassingen betreft:
het schermt de eigenschappen van de toepassingen af van de onderliggende hardware (<em>3-lagen model</em>).</p>
</div>
<div class="section" id="adressering">
<h2>Adressering<a class="headerlink" href="#adressering" title="Permalink naar deze titel">¶</a></h2>
<p>Elk protocollen in de stack heeft een eigen vorm van adressering.
In het gebruik van de IoT-knoop-webserver kun je deze allemaal tegenkomen.</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Adressering in de protocolstack</span><a class="headerlink" href="#id2" title="Permalink naar deze tabel">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Protocol</p></th>
<th class="head"><p>Adres</p></th>
<th class="head"><p>Voorbeeld</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HTTP</p></td>
<td><p>URL-pad</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/leds/0</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>TCP</p></td>
<td><p>TCP-poort</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">80</span></code> (voor HTTP)</p></td>
</tr>
<tr class="row-even"><td><p>IP</p></td>
<td><p>IP-adres</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">94.132.250.160</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>WiFi Ethernet</p></td>
<td><p>MAC-adres</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5CCF7F6EAE3B</span></code></p></td>
</tr>
</tbody>
</table>
<p>Het MAC-adres is gekoppeld aan de hardware: dit identificeert de IoT-knoop.
Als domeinnaam van de IoT-knoop-webserver gebruiken we <code class="docutils literal notranslate"><span class="pre">esp8266-xxxx</span></code>,
waarbij <code class="docutils literal notranslate"><span class="pre">xxxx</span></code> de laatste 4 tekens van het MAC-adres zijn.</p>
<p>De webserver adresseer je vanuit de browser via een URL van de vorm: <code class="docutils literal notranslate"><span class="pre">http://&lt;domeinnaam&gt;:&lt;poortnummer&gt;/&lt;URL-pad&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">http</span></code> geeft het protocol aan voor de interactie;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;domeinnaam&gt;</span></code> is de domeinnaam of het IP-adres van de webserver, voor het IP-protocol;</p></li>
<li><p>het <code class="docutils literal notranslate"><span class="pre">&lt;poortnummer&gt;</span></code> geeft de TCP-poort aan; als je dit onderdeel weglaat, wordt voor HTTP poort 80 gebruikt;</p></li>
<li><p>de webserver gebruikt het <code class="docutils literal notranslate"><span class="pre">&lt;URL-pad&gt;</span></code> om de verschillende verzoeken te onderscheiden.
Een URL-pad identificeert een <em>resource</em>: in het geval van een IoT-knoop, bijvoorbeeld een sensor of een actuator.</p></li>
</ul>
<p>Voorbeeld: <code class="docutils literal notranslate"><span class="pre">http://esp8266-ae3b/leds/0</span></code></p>
<p>Het IP-adres van de webserver is gebonden aan het netwerk.
Gewoonlijk krijgt de webserver dit toegewezen van de lokale router, via het DHCP-protocol.
De webserver krijgt dynamisch een lokaal IP-adres toegewezen van de lokale router, door middel van DHCP.
Met behulp van mDNS wordt een <em>lokale domeinnaam</em> (<code class="docutils literal notranslate"><span class="pre">example.local</span></code>) omgezet in het bijbehorende IP-adres.</p>
</div>
<div class="section" id="payload">
<h2>Payload<a class="headerlink" href="#payload" title="Permalink naar deze titel">¶</a></h2>
<p>Elk van de protocollen in de stack heeft een eigen dataformaat:
dit bevat <em>header</em>-gegevens voor het protocol zelf, bijvoorbeeld voor de adressering,
en de <em>payload</em>: de data die via dat protocol getransporteerd worden.</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Protocol- en payload-formaten</span><a class="headerlink" href="#id3" title="Permalink naar deze tabel">¶</a></caption>
<colgroup>
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Protocol</p></th>
<th class="head"><p>Adres</p></th>
<th class="head"><p>Dataformaat</p></th>
<th class="head"><p>Payload</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>HTTP</p></td>
<td><p>URL-pad</p></td>
<td><p>HTTP-request/response</p></td>
<td><p>HTML-document (etc.)</p></td>
</tr>
<tr class="row-odd"><td><p>TCP</p></td>
<td><p>TCP-poort</p></td>
<td><p>TCP segment, met bytestroom data</p></td>
<td><p>HTTP-request/response</p></td>
</tr>
<tr class="row-even"><td><p>IP</p></td>
<td><p>IP-adres</p></td>
<td><p>IP-pakket</p></td>
<td><p>TCP-segment</p></td>
</tr>
<tr class="row-odd"><td><p>WiFi Ethernet</p></td>
<td><p>MAC-adres</p></td>
<td><p>WiFi/Ethernet frame</p></td>
<td><p>IP-pakket</p></td>
</tr>
</tbody>
</table>
<p>Omdat de payload van een IP-pakket voor verschillende protocollen gebruikt kan worden,
bevat een IP-pakket een veld om aan te geven wat het gebruikte payload-protocol is.
De ontvanger weet dan op welke manier deze payload geïnterpreteerd moet worden.
Een vergelijkbaar principe kom je op elk niveau in de protocolstack tegen.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
<jinja2.runtime.BlockReference object at 0x1084b2350>
<script type="text/javascript">
  $(document).trigger("runestone:login-complete");
</script>

  </body>
</html>